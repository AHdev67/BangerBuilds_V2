{% extends 'base.html.twig' %}

{% block title %}List of products{% endblock %}

{% block body %}
<main>
    <h1 class="mainTitle">
        {% if category.name == "Headphones" or category.name == "Memory" %}
            {{ category.name }}
        {% elseif category.name == "Power supply" %}
            Power supplies
        {% elseif category.name == "Uninterruptible Power Supply" %}
            Uninteruptible Power Supplies
        {% else %}
            {{ category.name }}s
        {% endif %}
    </h1>


    <div class="filterFormContainer">
        {{ form_start(formFilters) }}
            {{ form_row(formFilters.orderBy) }}
            <div class="filterMenu">
                {{ form_row(formFilters.filterByBrand) }}
            </div>
        {{ form_end(formFilters) }}
    </div>

    <ul class="productUl">
        {% for product in products|sort((b, a) => a.globalRating <=> b.globalRating) %}
            <a href="{{ path('show_product', {'productId': product.id}) }}">
                <li>
                    <figure class="productImg">
                        <img src="" alt="{{product.label}} image">
                    </figure>
                    
                    <div class="productInfoMid">
                        <div class="label">
                            <b>{{ product.label }}</b>
                        </div>

                        <p class="desc">
                            This is a very cool product.
                        </p>

                        <div class="inStock">Availability (web) : 
                            {% if product.inStock == 1 %}
                                In stock
                            {% else %}
                                Out of stock
                            {% endif %}
                        </div>

                        <div id="rating-{{ product.id }}" class="productStars"> 
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <span class="globalRating hidden">{{ product.globalRating }}</span>
                        </div>
                    </div>

                    <div class="price"><b>{{ product.price }}$</b></div>
                </li>
            </a>
        {% endfor %}
    </ul>

    <div class="paginationContainer">
        {{ knp_pagination_render(products) }}
    </div>
</main>
{% endblock %}
